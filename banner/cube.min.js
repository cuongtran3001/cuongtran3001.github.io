function Cube(e){function t(e){X=e.width,Y=e.height,k=e.vertical,A=e.autoRotate,R=e.autoRotateDelay,C=e.autoRotateTime,M=e.autoRotateLeft,I=e.autoRotateTop,w=e.faces}function n(){var e;T=[];for(var t=0;x>t;t++)e=4>t?"rotateY("+90*t+"deg)":"rotateX("+90*Math.pow(-1,t)+"deg)",2==t&&(e=k?"rotateX(180deg) rotateY(0deg)":"rotateX(0deg) rotateY(180deg)"),e=e+" translateZ("+(4>t?X/2:Y/2)+"px)",p[t].style.marginLeft=-X/2+"px",p[t].style.marginTop=-(4>t?Y/2:X/2)+"px",p[t].style.width=X+"px",p[t].style.height=(4>t?Y:X)+"px",p[t].style.transform=p[t].style.webkitTransform=E+e,T.push(e);for(var t=0;t<w.length;t++)o(w[t])}function o(e){var t=e.face,n=document.querySelectorAll("."+t)[0];n.setAttribute("clickTag",e.clickTag);var o;o="banner"==e.type.toLowerCase()?document.createElement("iframe"):document.createElement("img"),o.setAttribute("src",e.link),o.setAttribute("width",parseInt(n.style.width)),o.setAttribute("height",parseInt(n.style.height)),n.insertBefore(o,n.childNodes[0])}function a(){for(var e,t=0;x>t;t++)e=p[t].style.transform||p[t].style.webkitTransform,T[t]=e.replace(E,"")}function i(e){for(var t,n=0;x>n;n++)t=(k?"rotateX("+e+"deg)":"rotateY("+e+"deg)")+T[n],p[n].style.transform=p[n].style.webkitTransform=E+t}function r(){q.addEventListener("touchstart",function(e){b=!0;var t=e.targetTouches[0];g={x:t.clientX,y:t.clientY},window.addEventListener("touchmove",d,!1)},!1),q.addEventListener("mousedown",function(e){L&&(L.kill(),L=null),b=!0,g={x:e.clientX,y:e.clientY},window.addEventListener("mousemove",s,!1)},!1),q.addEventListener("click",function(e){v(e.clientX,e.clientY,e.path)},!1),window.addEventListener("mouseup",c,!1),window.addEventListener("touchend",l,!1)}function c(e){window.removeEventListener("mousemove",s,!1),u(e.clientX,e.clientY)}function l(e){window.removeEventListener("touchmove",d,!1);var t=e.changedTouches[0];u(t.clientX,t.clientY)}function u(e,t){if(g.x==e&&g.y==t)return void(b=!1);if(b&&y!=h){var n={angle:y};TweenMax.to(n,.3,{angle:h,onUpdate:function(){i(n.angle)},onComplete:function(){a()}})}b=!1}function s(e){f(e.clientX,e.clientY)}function d(e){var t=e.targetTouches[0];f(t.clientX,t.clientY)}function f(e,t){var n={x:e-g.x,y:t-g.y},o={x:-n.y/2,y:n.x/2};i(k?o.x:o.y),y=k?o.x:o.y;var a=y%90;h=Math.abs(a)>=45?a>0?y+90-a:y-90-a:y-a}function v(e,t,n){if(g.x==e&&g.y==t)for(var o,a=0;a<n.length;a++)if(o=n[a],-1!=o.className.indexOf("face")){var i=o.getAttribute("clickTag");return void(i&&window.open(i,"_blank"))}}function m(e){var t={angle:e},n=e;n=k?I?n-90:n+90:M?n+90:n-90,L=TweenMax.to(t,C,{delay:R,angle:n,onUpdate:function(){i(t.angle)},onComplete:function(){m(n)}})}var g,y,h,w,p=document.querySelectorAll(".face"),x=6,T=[],b=!1,E="perspective(800px) ",L=null,X=300,Y=250,k=!1,A=!0,R=5,C=2,M=!0,I=!0,q=document.getElementById("banner");t(e),n(),r(),m(0)}
